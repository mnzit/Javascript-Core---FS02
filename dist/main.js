(()=>{"use strict";var e={d:(n,t)=>{for(var d in t)e.o(t,d)&&!e.o(n,d)&&Object.defineProperty(n,d,{enumerable:!0,get:t[d]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};function n(e){let n=e.style;return{border:function(e){return n.border=e,this},color:function(e){return n.color=e,this},padding:function(e){return n.padding=e,this},margin:function(e){return n.margin=e,this},backgroundColor:function(e){return n.backgroundColor=e,this},height:function(e){return n.height=e,this},width:function(e){return n.width=e,this},transition:function(e){return n.transition=e,this},textAlign:function(e){return n.textAlign=e,this},style:function(e,t){return n[e]=t,this},select:()=>new d(e)}}function t(e){return{click:function(n){return e.addEventListener("click",(t=>{t.preventDefault(),n(e)})),this},doubleClick:function(n){return e.addEventListener("dblclick",(()=>n(e))),this},mouseOver:function(n){return e.addEventListener("mouseover",(()=>n(e))),this},mouseLeave:function(n){return e.addEventListener("mouseleave",(()=>n(e))),this},event:function(n,t){return e.addEventListener(n,(n=>t(e,n))),this},input:function(n){return e.addEventListener("input",(t=>n(e,t))),this},select:()=>new d(e)}}function d(e){let d=null;return d=e instanceof HTMLElement?e:document.querySelector(e),{id:function(e){return null===d.id?d.id=e:d.id=d.id+" "+e.trim(),this},class:function(e){return null===d.class?d.class=e:d.class=d.id+" "+e.trim(),this},innerText:function(e){return d.innerText=e,this},innerHtml:function(e){return d.innerHtml=e,this},src:function(e){return d.src=e,this},appendChild:function(e){return d.appendChild(e().data()),this},child:function(e){return d.innerText="",d.appendChild(e().data()),this},type:function(e){return d.type=e,this},placeHolder:function(e){return d.placeholder=e,this},value:function(e){return d.value=e,this},name:function(e){return d.name=e,this},parent:function(e){e.appendChild((()=>d))},css:()=>new n(d),action:()=>new t(d),data:()=>d}}function r(e){let n=document.createElement(e);return{data:()=>n,select:()=>new d(n),appendChild:function(e){return n.appendChild(e().data()),this}}}function i(e){return e(r("div"))}function o(){let e=r("form"),n=r("table");e.appendChild((()=>n));let t=null,i={},o=!1;const a=new Map;let l=function(){return{type:null,component:null,validation:null,disabled:null}};return{addInput:function(e,d,s,u="Enter value",c=null,p=[]){let h=new r("tr"),m=new r("td"),f=new r("td");m.appendChild((()=>new r("label").select().innerText(e+": ").css().style("fontWeight",600).select()));let w=new l;if("dropdown"===d){let e=new r("select");p instanceof Function?p().then((n=>{n.forEach((n=>{e.appendChild((()=>new r("option").select().value(n.key).innerText(n.value)))})),this.onUpdate(t),o&&(console.log(i),this.patch(i))})):p.forEach((n=>{e.appendChild((()=>new r("option").select().value(n.key).innerText(n.value)))})),f.appendChild((()=>e)),w.component=e.data()}else{let e=(new r).select().type(d).name(s).placeHolder(u);f.appendChild((()=>e)),w.component=e.data()}return h.appendChild((()=>m)),h.appendChild((()=>f)),n.appendChild((()=>h)),w.type=d,w.validation=c,a.set(s,w),this},data:function(){return e.data()},json:function(){return a.forEach(((e,n)=>{let t=e.component;"checkbox"===t.type?i[n]=t.checked:i[n]=t.value})),i},patch:function(e){o=!0,i=e;for(let e in i)a.get(e)&&(a.get(e).component.value=i[e]);return this},onUpdate:function(e){return t=e,a.forEach(((n,t)=>{let r=n.component;"checkbox"===r.type?i[t]=r.checked:null==i[t]&&(i[t]=r.value),new d(r).action().input(((n,d)=>{"checkbox"===n.type?i[t]=n.checked:i[t]=n.value,null!=e&&e(i)}))})),null!=e&&e(i),this},submitComponent:function(n){return e.appendChild((()=>n(i))),this}}}e.d({},{N:()=>T});let a=function(){return{url:null,method:null,headers:null,body:null}};function l(e){let n={method:e.method,headers:e.headers};return"GET"!==e.method&&(n.body=JSON.stringify(e.body)),fetch(e.url,n)}const s="users";function u(...e){let n="http://localhost:8080/UniversityPortal";return n+="/",e.forEach(((e,t)=>{n+=e,t!=e.length-1&&(n+="/")})),n}function c(){return new i((e=>{e.appendChild((()=>r("h1").select().innerText("Login")));let n=(new o).addInput("Email","text","emailAddress","Email Address").addInput("Password","password","password","Password");e.appendChild((()=>n));let t=new r("button").select().innerText("Login").action().click((e=>{(function(e){let n=new a;return n.url=new u("login"),n.method="POST",n.body=e,n.headers={"Content-Type":"application/json"},new l(n).then((e=>{let n=e.headers.get("Authorization");return sessionStorage.setItem("token",n),e.json()}))})(n.json()).then((e=>{!0===e.success?T.route("user"):T.failed(r("h2").select().innerText(e.message).data())}))})).select();return e.appendChild((()=>t))}))}function p(e){let n=new a;return n.url=u(s,e),n.method="GET",n.headers={"Content-Type":"application/json",Authorization:sessionStorage.getItem("token")},new l(n).then((e=>e.json()))}function h(e=[]){let n=[];return{addColumn:function(e,t){return n.push({key:t,value:new r("th").select().innerText(e).css().border("1px solid black").padding("10px").select()}),this},addColumnComponent:function(e,t){return n.push({key:null,value:new r("th").select().innerText(e).css().border("1px solid black").padding("10px").select(),func:t}),this},build:function(){let t=new r("tr").select().css().border("1px solid black").padding("10px").backgroundColor("pink").select();n.forEach((e=>t.appendChild((()=>e.value))));let d=new r("table").select().css().border("1px solid black").padding("1px").backgroundColor("#F5B8AA").select(),i=new r("thead");i.appendChild((()=>t)),d.appendChild((()=>i));let o=new r("tbody");return e.forEach((e=>{let t=new r("tr").select().css().border("1px solid black").backgroundColor("#EADEDB").padding("10px").select();n.forEach((n=>{if(n.func){let d=new r("td").select().css().border("1px solid black").padding("10px").select().appendChild((()=>n.func(e,t.data()))).data();t.appendChild((()=>d))}else{let d=new r("td").select().css().border("1px solid black").padding("10px").select().innerText(e[n.key]).data();t.appendChild((()=>d))}})),o.appendChild((()=>t.data()))})),d.appendChild((()=>o.data())),d.data()}}}function m(){return new i((e=>{let n=new r("h1").select().innerText("Users");e.appendChild((()=>n));let t=new r("div");(function(){let e=new a;return e.url=u(s),e.method="GET",e.headers={"Content-Type":"application/json",Authorization:sessionStorage.getItem("token")},new l(e).then((e=>e.json()))})().then((e=>{let n=new h(e.data).addColumn("First name","firstName").addColumn("Last name","lastName").addColumn("Gender","genderType").addColumn("Address","address").addColumn("Contact no","contactNo").addColumn("Email Address","emailAddress").addColumn("Role","role").addColumnComponent("Action",f).build();t.appendChild((()=>n))})),e.appendChild((()=>t))}))}function f(e,n){return(e,n)=>{return new r("span").appendChild((t=e.id,()=>new r("button").select().innerText("Edit").action().click((e=>{p(t).then((e=>{!0===e.success?T.route("user-edit",e.data):T.failed(new r("h2").select().innerText(e.message))}))})).select())).appendChild(function(e){return()=>new r("button").select().innerText("View").action().click((n=>{p(e).then((e=>{!0===e.success?T.route("user-detail",e.data):T.failed(new r("h2").select().innerText(e.message))}))})).select()}(e.id)).appendChild(function(e,n){return()=>new r("button").select().innerText("Delete").action().click((t=>{(function(e){let n=new a;return n.url=u(s,e),n.method="DELETE",n.headers={"Content-Type":"application/json",Authorization:sessionStorage.getItem("token")},new l(n).then((e=>e.json()))})(e).then((e=>{!0===e.success?n.remove():T.failed(new r("h2").select().innerText(e.message))}))})).select()}(e.id,n));var t}}const w=[{key:"MALE",value:"Male"},{key:"FEMALE",value:"Female"}];function C(e){return()=>e().then((e=>{let n=[];return e?.data?.roles?.forEach((e=>{n.push({key:e.id,value:e.name})})),n}))}function x(){let e=new a;return e.url=new u("roles"),e.method="GET",e.headers={"Content-Type":"application/json",Authorization:sessionStorage.getItem("token")},new l(e).then((e=>e.json()))}function g(e){return new r("button").select().innerText("Save").action().click((n=>{(function(e){let n=new a;return n.url=u(s),n.method="POST",n.body=e,n.headers={"Content-Type":"application/json",Authorization:sessionStorage.getItem("token")},new l(n).then((e=>e.json()))})(e).then((e=>e.json())).then((e=>{!0===e.success?T.route("user"):T.failed(new r("h2").select().innerText(e.message))}))})).select()}const T=new function(e){const n=new Map;return{onLoad:function(n){e.child((()=>n()))},register:function(e,t){return n.set(e,t),this},notFound:function(){e.child((()=>r("h1").select().innerText("404 Not Found")))},failed:function(n){e.child((()=>n.data()))},route:function(t,d=null){n.has(t)?d?e.child((()=>n.get(t)(d))):e.child((()=>n.get(t)())):e.child((()=>new r("h1").select().innerText("404 Not Found")))}}}(d("#render")).register("login",c).register("user-list",m).register("user-detail",(function(e){return new i((n=>{n.appendChild((()=>new r("h1").select().innerText("User Detail"))),n.appendChild((()=>new r("h2").select().innerText("Firstname: "+e.firstName))),n.appendChild((()=>new r("h2").select().innerText("Middlename: "+e.middleName))),n.appendChild((()=>new r("h2").select().innerText("Lastname: "+e.lastName))),n.appendChild((()=>new r("h2").select().innerText("Gender: "+e.genderType))),n.appendChild((()=>new r("h2").select().innerText("Address: "+e.address))),n.appendChild((()=>new r("h2").select().innerText("Contact no: "+e.contactNo))),n.appendChild((()=>new r("h2").select().innerText("Email Address: "+e.emailAddress)))}))})).register("user-create",(function(){return new i((e=>{e.appendChild((()=>new r("h1").select().innerText("Create User")));let n=(new o).addInput("Firstname","text","firstName").addInput("Middlename","text","middleName","Middle Name").addInput("Lastname","text","lastName","Last Name").addInput("Gender","dropdown","genderType","Gender",null,w).addInput("Address","text","address","Address").addInput("Contact no","text","contactNo","Contact no").addInput("Email Address","text","emailAddress","Email Address").addInput("Send Email","checkbox","sendEmail","Send Email").addInput("Generate Password","checkbox","isPasswordGenerated","Generate Password").addInput("Role","dropdown","roleId","Role",null,C(x)).submitComponent(g);e.appendChild((()=>n))}))})).register("user-edit",(function(e){return new i((n=>{n.appendChild((()=>new r("h1").select().innerText("Edit User")));let t=o().addInput("Firstname","text","firstName","First Name").addInput("Middlename","text","middleName","Middle Name").addInput("Lastname","text","lastName","Last Name").addInput("Gender","dropdown","genderType","Gender",null,w).addInput("Address","text","address","Address").addInput("Contact no","text","contactNo","Contact no").addInput("Email Address","text","emailAddress","Email Address").addInput("Role","dropdown","roleId","Role",null,C(x)).patch(e).submitComponent((e=>new r("button").select().innerText("Update").action().click((n=>{(function(e){let n=new a;return n.url=u(s),n.method="PUT",n.body=e,n.headers={"Content-Type":"application/json",Authorization:sessionStorage.getItem("token")},new l(n).then((e=>e.json()))})(e).then((e=>{!0===e.success?T.route("user"):T.failed(new r("h2").select().innerText(e.message))}))})).select()));return n.appendChild((()=>t))}))})).register("logout",c).onLoad(null!=sessionStorage.getItem("token")?m:c)})();